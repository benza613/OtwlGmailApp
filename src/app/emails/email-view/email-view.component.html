<ngx-spinner size="default" type="line-scale-pulse-out-rapid"> Loading...
  </ngx-spinner>

<div class="card email-card" *ngFor="let eml of (emailList | async)" style="max-width:100%;">
  <div class="card-header no-gutters" [ngClass]="{'card-color': eml.isOpen}">
    <div class="col">
      <div class="row">
        <div class="col-md-7">
          {{eml.from}}
        </div>
        <div class="col-md-3 pull-right">
          {{eml.date}}
        </div>
        <div class="col-md-2 pull-left">
          <button type="button" class="btn btn-sm btn-outline-primary float-right" style="margin: 2px;"
            (click)="eml.isOpen = !eml.isOpen">
            Expand
          </button>
          <button type="button" class="btn btn-sm btn-outline-warning float-right" style="margin: 2px;"
            (click)="draftReply(eml)">
            R
          </button>
          <button type="button" class="btn btn-sm btn-outline-warning float-right" style="margin: 2px;"
            (click)="draftForward(eml)">
            F
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body no-gutters" style="max-width:100%" [ngbCollapse]="!eml.isOpen">
    <div class="col">
      <div class="card" style="margin-bottom: 5px;">
        <div class="card-body">
          <div class="row">
            <div class="col-md-9 pull-left" style=" font-size: 14px;">
              <span style="color:rgb(133, 130, 130); font-weight: 600;">From: </span>{{eml.from}}
            </div>
            <div class="col-md-3 pull-right" style=" font-size: 14px;">
              <span style="color:rgb(133, 130, 130); font-weight: 600;">DATE: </span>{{eml.date}}
            </div>
          </div>
          <div class="row">
            <div class="col-md-5 pull-left" style=" font-size: 14px;">
              <span style="color:rgb(133, 130, 130); font-weight: 600;">To: </span>{{eml.msgTo}}
            </div>
            <div class="col-md-4 pull-left" style=" font-size: 14px;">
              <span style="color:rgb(133, 130, 130); font-weight: 600;">CC: </span>{{eml.msgCc}}
            </div>
            <div class="col-md-3 pull-left" style=" font-size: 14px;">
              <span style="color:rgb(133, 130, 130); font-weight: 600;">BCC: </span>{{eml.msgBcc}}
            </div>
          </div>
        </div>
      </div>
      <div class="row" [innerHTML]="eml.body | safeHtml" style="max-width:100%; margin: 0px;">

      </div>
      <div class="row pull-right">
        <div class="col">
            <button type="button" class="btn btn-warning actions" (click)="fileAction(1, eml.msgid, eml.attachments)">DOWNLOAD</button>
            <button type="button" class="btn btn-success actions" >UPLOAD</button>
        </div>
      </div>
      <div class="card parent" *ngIf="eml.attachments.length > 0">
        <div class="card-body row" style="padding: 5px 20px;">
          <div class="card p-2"
            style="height: 100px; width: 32%; margin: 5px 5px; background-color: #3a3a3a;color:white;"
            *ngFor="let att of eml.attachments">
            <div class="card-body" style="padding: 10px;">
              <div class="col">
                <div class="row pull-right" style="margin:0px 5px 15px 5px;">
                    <input [(ngModel)]="att.isChecked" type="checkbox" style="transform: scale(1.5);-webkit-transform: scale(1.5);">
                </div>
                <div class="row" style=" font-size: 14px;" [ngbTooltip]="att.fileName">
                  <span style="color:rgb(255, 255, 255); font-weight: 600; margin-left: 10px; ">{{att.fileName | slice:0:20}}<i
                      *ngIf="att.fileName.length > 0">...</i></span>
                </div>
                <hr style="background-color: #3a3a3a;color: #3a3a3a; margin: 8px;" />
                <div class="row" style=" font-size: 12px;">
                  <div class="col">
                    <span style="color:rgb(255, 255, 255); font-weight: 600; margin-left: 10px;">{{att.fileSize}}</span>
                  </div>
                  <div class="col">
                    <button type="button" class="btn btn-sm btn-outline-warning float-right" style="margin-bottom: 10px;"
                      (click)="fileAction(1,eml.msgid, eml.attachments, att)">
                      <i class="fa fa-download" aria-hidden="true"></i>
                    </button>
                  </div>
                  <div class="col">
                    <button type="button" [disabled]="storeSelector === 'unread'"
                      class="btn btn-sm btn-outline-success float-right" style="margin:0px 10px 0px 10px;;"
                      (click)="fileAction(2,eml.msgid, eml.attachments, att)">
                      <i class="fa fa-upload" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>